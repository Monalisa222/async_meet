<div class="flex justify-between items-center mb-6">
  <h1 class="text-2xl font-semibold text-gray-900">
    Your Organizations
  </h1>

  <%= link_to "New Organization",
        new_organization_path, data: { turbo: false }, 
        class: "bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition" %>
</div>

<div class="grid gap-4 md:grid-cols-2">
  <% @organizations.each do |org| %>

    <div class="bg-white p-6 rounded-xl shadow-sm
                <%= 'ring-2 ring-blue-500' if current_organization&.id == org.id %>">

      <h2 class="text-lg font-medium text-gray-900">
        <%= org.name %>
      </h2>

      <% if org.description.present? %>
        <p class="text-sm text-gray-600 mt-1">
          <%= org.description %>
        </p>
      <% end %>

      <div class="mt-4">
        <%= button_to "Switch",
              switch_organizations_path,
              method: :post,
              params: { organization_id: org.id },
              class: "text-blue-600 font-medium hover:text-blue-800" %>
      </div>

      <% if current_membership&.owner? && current_organization&.id == org.id %>
        <div class="mt-4">
          <button onclick="openMemberModal(<%= org.id %>)"
                  class="text-green-600 font-medium hover:text-green-800">
            Add Member
          </button>
        </div>
      <% end %>

    </div>

  <% end %>
</div>

<%= render "organizations/member_modal" %>
